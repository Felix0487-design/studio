rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Rules for the 'votes' collection
    match /votes/{voteId} {
      // Allow anyone to read individual votes or the whole list.
      // This is necessary for the home page to count votes and for the
      // results page to display them.
      allow read: if true;

      // Allow only authenticated users to create their own vote.
      // The `voteId` must be the user's UID.
      allow create: if request.auth != null && request.auth.uid == voteId;

      // Nobody can update or delete votes once they are cast.
      allow update, delete: if false;
    }
  }
}
